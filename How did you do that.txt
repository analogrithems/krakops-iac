# Create our IAC/terraform directory
$ mkdir iac

# Create our CICD user in IAM that will run all our reform/terraform commands this will be helpful when we push this to a cicd system

# Create the iac bucket where we will store state and secrets keys
wage-slave:iac acollins$ reform mkS3Bucket -b krakops-iac --region us-west-1
INFO: Task: mkS3Bucket. (0.414283)
INFO: Region: us-west-1. (0.54842)
INFO: krakops-iac created in us-west-1. (0.575681)

# Create a initial reform project
wage-slave:iac acollins$ reform create -b krakops-iac -q dev -r us-west-1
INFO: Task: Create project /Users/aaroncollins/Development/kraken/iac. (0.327772)
INFO: Task: key_gen. (0.328066)
None

#We should now have our IAC structure ready to go and all further AWS resources should be created from here

First thing we should do is configure our defaults/config.json and dev/config.json
reform secrets -q dev -c RSA_AES

Next we create our terraform infra, since this is just a test we'll make use of public modules to do the majority of the work for us


Next we build our litecoin-container Dockerfile and do a quick test build

export APP_VERSION=0.1 BUILD_TIME="$(date +%s)" GIT_BRANCH=main DOCKER_FILE=Dockerfile APP=litecoin-node GIT_SHA=12345
DOCKER_BUILD_CMD="docker build ${DOCKER_BUILD_ARGS} \
                    --build-arg APP_VERSION="${APP_VERSION}" \
                    --build-arg BUILD_TIME="${BUILD_TIME}" \
                    --build-arg GIT_BRANCH="${GIT_BRANCH}" \
                    -f ${DOCKER_FILE} \
                    -t ${APP}:${GIT_SHA} \
                    -t ${APP} ."